<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oliver Turns 8 ‚Äì RSVP</title>
  <style>
    :root { --gold:#ffd36b; --blue:#00aaff; --red:#ff3c3c; }
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:#fff; background: radial-gradient(circle at 30% 10%, #173a66, #04060a 60%, #000);
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .card{
      width:min(720px,100%); border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.55); box-shadow:0 20px 60px rgba(0,0,0,.45);
      border-radius:18px; overflow:hidden;
    }
    .top{ padding:26px 22px 18px; text-align:center; }
    .title{ font-weight:800; letter-spacing:3px; font-size:clamp(22px,4.6vw,36px); }
    .subtitle{ opacity:.85; margin-top:6px; font-size:clamp(12px,2.6vw,16px); letter-spacing:1px; }
    .pillrow{ display:flex; gap:10px; justify-content:center; margin-top:14px; flex-wrap:wrap; }
    .pill{ padding:8px 12px; border-radius:999px; font-weight:700; font-size:12px;
      border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06); }
    .pill.blue{ border-color:rgba(0,170,255,.45); }
    .pill.red{ border-color:rgba(255,60,60,.45); }
    .mid{ padding:0 22px 18px; display:grid; gap:12px; }
    .btn{
      width:100%; border:none; cursor:pointer; padding:14px 16px; border-radius:14px;
      font-weight:800; font-size:16px; letter-spacing:.5px;
    }
    .btn.gold{ background:linear-gradient(180deg,#ffe7a6,var(--gold)); color:#1a1200; }
    .btn.blue{ background:linear-gradient(180deg,#3ad0ff,var(--blue)); color:#00131a; }
    .btn.red{ background:linear-gradient(180deg,#ff7b7b,var(--red)); color:#1a0000; }
    .fine{ opacity:.75; font-size:12px; line-height:1.35; text-align:center; padding:0 22px 22px; }
    a{ color:var(--gold); }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width:520px){ .row{ grid-template-columns:1fr; } }
    #hyperspace{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 9999;
}
  </style>
</head>
<body>
  <canvas id="hyperspace"></canvas>
  <div class="card">
    <div class="top">
      <div class="title">THE BALANCE OF EIGHT</div>
      <div class="subtitle">Tap to ignite. Then continue to RSVP.</div>
      <div class="pillrow">
        <div class="pill blue">LIGHT SIDE</div>
        <div class="pill red">DARK SIDE</div>
      </div>
    </div>

    <div class="mid">
      <button class="btn gold" id="igniteBtn">TAP TO IGNITE LIGHTSABER ‚öîÔ∏è</button>

      <div class="row">
        <button class="btn blue" id="musicBtn">PLAY THEME MUSIC üéµ</button>
        <button class="btn red" id="stopBtn">STOP MUSIC ‚õî</button>
      </div>

      <button class="btn gold" id="rsvpBtn">CONTINUE TO RSVP üìã</button>
    </div>

    <div class="fine">
      RSVP goes to Google Forms: <a id="formLink" target="_blank" rel="noopener">open form</a>
    </div>
  </div>

  <script>
    // Google Form RSVP
    const RSVP_FORM = "https://docs.google.com/forms/d/1OLrE8YDSc8s2vui9SLxuMw_eFsDtCxU6Dw6OUFzqhu0/viewform";

    // IMPORTANT: these must match your repo filenames EXACTLY
    const SABER_URL = "./Lightsaber Fight.mp3";
    const MUSIC_URL = "./Star Wars Theme.mp3";

    const saber = new Audio(SABER_URL);
    const music = new Audio(MUSIC_URL);
    music.loop = true;
    music.volume = 0.65;
// ================= HYPERSPACE ENGINE =================
const fxCanvas = document.getElementById("hyperspace");
const fxCtx = fxCanvas.getContext("2d", { alpha: true });

function fxResize(){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  fxCanvas.width = Math.floor(window.innerWidth * dpr);
  fxCanvas.height = Math.floor(window.innerHeight * dpr);
  fxCanvas.style.width = window.innerWidth + "px";
  fxCanvas.style.height = window.innerHeight + "px";
  fxCtx.setTransform(dpr,0,0,dpr,0,0);
}
fxResize();
window.addEventListener("resize", fxResize);

function hyperspaceBurst(side){
  const w = window.innerWidth;
  const h = window.innerHeight;
  const cx = w/2;
  const cy = h/2;

  const colors = side === "dark"
   ? ["rgba(255,60,60,.95)","rgba(255,170,170,.7)","rgba(255,255,255,.55)"]
   : ["rgba(0,170,255,.95)","rgba(200,245,255,.75)","rgba(255,255,255,.6)"];

  const stars = Array.from({length:160},()=>({
    a:Math.random()*Math.PI*2,
    s:260+Math.random()*980,
    l:22+Math.random()*150,
    w:1+Math.random()*2.4,
    c:colors[(Math.random()*colors.length)|0]
  }));

  const start = performance.now();

  function frame(t){
    const p = Math.min(1,(t-start)/850);
    const fade = p < 0.75 ? 1 : (1 - (p-0.75)/0.25);

    fxCtx.clearRect(0,0,w,h);

    fxCtx.globalAlpha = 0.18 * fade;
    fxCtx.fillStyle = side === "dark" ? "rgba(255,60,60,1)" : "rgba(0,170,255,1)";
    fxCtx.beginPath();
    fxCtx.ellipse(cx, cy, 260*(0.6+p), 140*(0.6+p), 0, 0, Math.PI*2);
    fxCtx.fill();

    fxCtx.globalAlpha = 1 * fade;
    stars.forEach(s=>{
      const d=s.s*p;
      const x2=cx+Math.cos(s.a)*d;
      const y2=cy+Math.sin(s.a)*d;
      const x1=x2-Math.cos(s.a)*s.l*(0.25+p);
      const y1=y2-Math.sin(s.a)*s.l*(0.25+p);

      fxCtx.strokeStyle=s.c;
      fxCtx.lineWidth=s.w;
      fxCtx.lineCap="round";
      fxCtx.beginPath();
      fxCtx.moveTo(x1,y1);
      fxCtx.lineTo(x2,y2);
      fxCtx.stroke();
    });

    if(p<1) requestAnimationFrame(frame);
    else fxCtx.clearRect(0,0,w,h);
  }
  requestAnimationFrame(frame);
}
// // LIGHT SIDE = Music + Blue Hyperspace
document.getElementById("musicBtn").addEventListener("click", () => {
  hyperspaceBurst("light");
  music.currentTime = 0;
  music.play().catch(() => window.open(MUSIC_URL, "_blank", "noopener"));
});

// DARK SIDE = Saber + Red Hyperspace
document.getElementById("igniteBtn").addEventListener("click", () => {
  hyperspaceBurst("dark");
  saber.currentTime = 0;
  saber.play().catch(() => window.open(SABER_URL, "_blank", "noopener"));
});

// Stop music
document.getElementById("stopBtn").addEventListener("click", () => {
  music.pause();
  music.currentTime = 0;
});

// RSVP
document.getElementById("rsvpBtn").addEventListener("click", () => {
  window.location.href = RSVP_FORM;
});
    
    // ---- Hyperspace FX (Light/Dark) ----
const fxCanvas = document.getElementById("hyperspace");
const fxCtx = fxCanvas.getContext("2d", { alpha: true });

function fxResize(){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  fxCanvas.width  = Math.floor(window.innerWidth * dpr);
  fxCanvas.height = Math.floor(window.innerHeight * dpr);
  fxCanvas.style.width = window.innerWidth + "px";
  fxCanvas.style.height = window.innerHeight + "px";
  fxCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
}
fxResize();
window.addEventListener("resize", fxResize);

function hyperspaceBurst(side){ // "light" or "dark"
  const w = window.innerWidth;
  const h = window.innerHeight;
  const cx = w * 0.5;
  const cy = h * 0.45;

  const palette = (side === "dark")
    ? ["rgba(255,60,60,0.95)", "rgba(255,140,140,0.85)", "rgba(255,230,230,0.75)"]
    : ["rgba(0,170,255,0.95)", "rgba(190,240,255,0.85)", "rgba(255,255,255,0.80)"];

  const start = performance.now();
  const duration = 850;
  const count = 150;

  const stars = Array.from({ length: count }, () => {
    const a = Math.random() * Math.PI * 2;
    return {
      a,
      speed: 240 + Math.random() * 820,
      len: 16 + Math.random() * 140,
      thick: 1 + Math.random() * 2.4,
      color: palette[(Math.random() * palette.length) | 0],
      ox: cx + (Math.random() - 0.5) * 50,
      oy: cy + (Math.random() - 0.5) * 50,
    };
  });

  function frame(t){
    const p = Math.min(1, (t - start) / duration);
    const fade = p < 0.72 ? 1 : (1 - (p - 0.72) / 0.28);

    fxCtx.clearRect(0, 0, w, h);

    // Warp flash bloom
    fxCtx.globalAlpha = 0.20 * fade;
    fxCtx.fillStyle = (side === "dark") ? "rgba(255,60,60,1)" : "rgba(0,170,255,1)";
    fxCtx.beginPath();
    fxCtx.ellipse(cx, cy, 220 * (0.6 + p), 120 * (0.6 + p), 0, 0, Math.PI * 2);
    fxCtx.fill();

    // Star streaks
    fxCtx.globalAlpha = 1 * fade;
    for (const s of stars){
      const dist = s.speed * p;
      const x2 = s.ox + Math.cos(s.a) * dist;
      const y2 = s.oy + Math.sin(s.a) * dist;

      const x1 = x2 - Math.cos(s.a) * s.len * (0.2 + p);
      const y1 = y2 - Math.sin(s.a) * s.len * (0.2 + p);

      fxCtx.strokeStyle = s.color;
      fxCtx.lineWidth = s.thick;
      fxCtx.lineCap = "round";
      fxCtx.beginPath();
      fxCtx.moveTo(x1, y1);
      fxCtx.lineTo(x2, y2);
      fxCtx.stroke();
    }

    if (p < 1) requestAnimationFrame(frame);
    else fxCtx.clearRect(0, 0, w, h);
  }

  requestAnimationFrame(frame);
}
  </script>
</body>
</html>
